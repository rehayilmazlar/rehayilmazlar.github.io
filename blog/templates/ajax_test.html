{% extends "layout.html" %}
{% block body %}
<table id="myTable" class="table table-hover table-dark"  style="table-layout: fixed;">
  <thead>
    <tr>
      <th scope="col" style="color:steelblue;width:240px"></th>
      <th scope="col" style="color:steelblue;width:200px">Quantity</th>
      <th scope="col" style="color:steelblue;width:200px">Measure</th>
      <th scope="col" style="color:steelblue;width:200px">Ingredient</th>
      <th scope="col" style="color:steelblue;width:100px"></th>
      <th scope="col" style="color:steelblue"></th>
      <th scope="col" style="color:steelblue"></th>
  </thead>
<table class="table table-hover table-dark"  style="table-layout: fixed;">
  <h4>Ingredients</h4>
<thead>
  <tr>
    <th scope="col" style="color:steelblue;width:240px"></th>
    <th scope="col" style="color:steelblue;width:200px">Quantity</th>
    <th scope="col" style="color:steelblue;width:200px">Measure</th>
    <th scope="col" style="color:steelblue;width:200px">Ingredient</th>
    <th scope="col" style="color:steelblue;width:100px"></th>
    <th scope="col" style="color:steelblue"></th>
    <th scope="col" style="color:steelblue"></th>
</thead>
<tbody>    

<form id="infoForm2" method="POST">
    <tr>
        <th scope="row">Enter amounts</th>
    
        <td><input name="qty_form" id="qty" style="width: 70%;" class="form-control form-control-sm" type="text" placeholder="New amount"></td>
        <td><input name="msr_form" id="msr" class="form-control form-control-sm" type="text" placeholder="New measure"></td>
        <td><input name="ing_form" id="ing" style="width: 80%;" class="form-control form-control-sm" type="text" placeholder="New ingredient"></td>
        <td></td>
        <td></td>
        <td><button id="gonder" class="btn btn-success" style="float:right;padding:2px 2px 2px 2px" onclick="addRow()">Add</button></td>
    </tr>

  </form>  

</tbody>
</table>


<form id="infoForm" method="POST">
	<table>
		<tr>
			<td>İsim</td>
			<td><input type="text" name="title" /></td>
		</tr>
		<tr>
			<td>Açıklama</td>
			<td><textarea name="desc"></textarea> <br><br></td>
		</tr>
		<tr>
			<td colspan="2"><button id="postButton" onclick="addRow()">Gönder</button></td>
		</tr>
	</table>
</form>
<script>
$(document).on("submit", "#infoForm2", function(event){ //infoForm id li form post edildiğinde
  event.preventDefault();
	$.ajax({ 
		type: "POST",             
    data: new FormData(this),
		contentType: false,       
		cache: false,             
    processData:false,
		success: function(data) {
			alert("success"); //post sonucunu yazdir
    },
    error: function(data) {
      alert("Error, try again!")
    }
    
	});
});
</script>


<!-- tablo ekleme javascript benim düzelttiğim-->
<script>
  var id=1;
  
  function addRow() {
    var table = document.getElementById("myTable");
    var row = table.getElementsByTagName('tr');
    var row = table.insertRow(row.length);
    var ing = document.getElementById('ing');
    var msr = document.getElementById('msr');
    var qty = document.getElementById('qty');
    var cell1 = row.insertCell(0);
    var cell2 = row.insertCell(1);
    var cell3 = row.insertCell(2);
    var cell4 = row.insertCell(3);
    var cell5 = row.insertCell(4);
    var cell6 = row.insertCell(5);
    var cell7 = row.insertCell(6);
    cell1.innerHTML = '';
    cell2.innerHTML = qty.value;
    cell3.innerHTML = msr.value;
    cell4.innerHTML = ing.value;
    cell5.innerHTML = '';
    cell6.innerHTML = '';
    cell7.innerHTML = "<a href='#' onclick='deleteRow(this)' id='delete' class='btn btn-danger' style='float:right;padding:2px 7px 2px 7px'>Delete</a>"
    id +=3;
  }
  
  function deleteRow(toBeDeletedRow)
  {
    id -=3;
    var p=toBeDeletedRow.parentNode.parentNode;
    p.parentNode.removeChild(p);
  }

  </script>
{% endblock body %}